"use strict";(self.webpackChunkairways=self.webpackChunkairways||[]).push([[87],{2087:(Y,_,i)=>{i.r(_),i.d(_,{MainModule:()=>q});var g=i(6895),o=i(4006),O=i(1556),M=i(8297),t=i(4650),b=i(6582),P=i(9653),f=i(529);let C=(()=>{class n{constructor(e){this.http=e,this.url="https://angular-final-task-server.onrender.com"}getAllCountry(){return this.http.get(this.url+"/country")}getAllAirport(){return this.http.get(this.url+"/airport")}getTicket(e){return this.http.post(`${this.url}/airport`,e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(f.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();var k=i(7392),u=i(9549),w=i(4144),v=i(4859),y=i(4385),T=i(3238),h=i(1948),Z=i(2118),d=i(9602),I=i(1572);function A(n,l){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.TgZ(2,"h5",22),t._uU(3),t.qZA()()),2&n){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.AsE(" ",e.city," (",e.code,") "),t.xp6(2),t.AsE("",e.name,", ",e.country,"")}}function N(n,l){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.TgZ(2,"h5",22),t._uU(3),t.qZA()()),2&n){const e=l.$implicit;t.Q6J("value",e),t.xp6(1),t.AsE(" ",e.city," (",e.code,") "),t.xp6(2),t.AsE("",e.name,", ",e.country,"")}}function J(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",11)(1,"mat-label"),t._uU(2,"Dates"),t.qZA(),t.TgZ(3,"mat-date-range-input",23),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(8),c=t.oxw(2);return t.KtG(c.openDateBlock(r))}),t._UZ(4,"input",24)(5,"input",25),t.qZA(),t._UZ(6,"mat-datepicker-toggle",26)(7,"mat-date-range-picker",27,28),t.qZA()}if(2&n){const e=t.MAs(8),a=t.oxw(2);t.xp6(3),t.Q6J("min",a.minDate)("rangePicker",e),t.xp6(1),t.Q6J("readonly",!0),t.xp6(1),t.Q6J("readonly",!0),t.xp6(1),t.Q6J("for",e)}}function H(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",11)(1,"mat-label"),t._uU(2,"Date"),t.qZA(),t.TgZ(3,"input",29),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(6),c=t.oxw(2);return t.KtG(c.openDateBlock(r))}),t.qZA(),t._UZ(4,"mat-datepicker-toggle",26)(5,"mat-datepicker",27,30),t.qZA()}if(2&n){const e=t.MAs(6),a=t.oxw(2);t.xp6(3),t.Q6J("readonly",!0)("min",a.minDate)("matDatepicker",e),t.xp6(1),t.Q6J("for",e)}}function D(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"main",2)(1,"div",3)(2,"form",4)(3,"div",5)(4,"mat-radio-group",6)(5,"mat-radio-button",7),t.NdJ("change",function(r){t.CHM(e);const c=t.oxw();return t.KtG(c.selectFlightType(r))}),t._uU(6,"Round Trip"),t.qZA(),t.TgZ(7,"mat-radio-button",8),t.NdJ("change",function(r){t.CHM(e);const c=t.oxw();return t.KtG(c.selectFlightType(r))}),t._uU(8,"One Way"),t.qZA()()(),t.TgZ(9,"div",9)(10,"button",10),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.flipFlight())}),t.TgZ(11,"mat-icon"),t._uU(12,"swap_horiz"),t.qZA()(),t.TgZ(13,"mat-form-field",11)(14,"mat-label"),t._uU(15,"From"),t.qZA(),t.TgZ(16,"mat-select",12)(17,"mat-select-trigger"),t._uU(18),t.qZA(),t.YNc(19,A,4,5,"mat-option",13),t.qZA()(),t.TgZ(20,"mat-form-field",11)(21,"mat-label"),t._uU(22,"Destination"),t.qZA(),t.TgZ(23,"mat-select",14)(24,"mat-select-trigger"),t._uU(25),t.qZA(),t.YNc(26,N,4,5,"mat-option",13),t.qZA()()(),t.TgZ(27,"div",15),t.YNc(28,J,9,5,"mat-form-field",16),t.YNc(29,H,7,4,"mat-form-field",16),t.TgZ(30,"app-html-select",17),t.NdJ("currentValueChange",function(r){t.CHM(e);const c=t.oxw();return t.KtG(c.dropdownValueChanged(r))}),t.qZA()(),t.TgZ(31,"div",18)(32,"button",19),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.submitSearch())}),t._uU(33,"Search"),t.qZA()()()(),t._UZ(34,"div",20),t.qZA()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.form),t.xp6(16),t.Oqu(null==e.form.controls.from.value?null:e.form.controls.from.value.city),t.xp6(1),t.Q6J("ngForOf",e.cities),t.xp6(6),t.Oqu(null==e.form.controls.destination.value?null:e.form.controls.destination.value.city),t.xp6(1),t.Q6J("ngForOf",e.cities),t.xp6(2),t.Q6J("ngIf","1"===e.flightType),t.xp6(1),t.Q6J("ngIf","2"===e.flightType),t.xp6(1),t.Q6J("title","Passengers")("options",e.dropdownOptions),t.xp6(2),t.Q6J("disabled",e.form.invalid)}}function S(n,l){1&n&&(t.TgZ(0,"div",31),t._UZ(1,"mat-spinner"),t.qZA())}let F=(()=>{class n{constructor(e,a,r){this.route=e,this.store=a,this.httpService=r,this.dropdownOptions={adults:0,child:0,infant:0},this.minDate=new Date,this.cities=[],this.form=new o.cw({from:new o.NI(null,o.kI.required),destination:new o.NI(null,o.kI.required),date:new o.NI(null,o.kI.required),passengers:new o.cw({adults:new o.NI(0,[o.kI.required,o.kI.pattern(/[1-9]/)]),child:new o.NI(0,[o.kI.required,o.kI.pattern(/[0-9]/)]),infant:new o.NI(0,[o.kI.required,o.kI.pattern(/[0-9]/)])}),rangeDate:new o.cw({start:new o.NI(null,o.kI.required),end:new o.NI(null,o.kI.required)})}),this.flightType="1"}ngOnInit(){this.httpService.getAllAirport().subscribe(r=>{this.cities=r}),this.form.controls.date.disable(),this.form.controls.rangeDate.enable();const e=localStorage.getItem("search_result");e&&JSON.parse(e),this.store.select(O.TC).subscribe(r=>{if(r){const{from:c,date:m,destination:x,passengers:s,rangeDate:p}=r;this.form.get("from")?.setValue(c),this.form.get("date")?.setValue(m),this.form.get("destination")?.setValue(x),this.form.get("passengers")?.get("adults")?.setValue(s?.adults),this.form.get("passengers")?.get("child")?.setValue(s?.child),this.form.get("passengers")?.get("infant")?.setValue(s?.infant),this.form.get("rangeDate")?.get("start")?.setValue(p?.start),this.form.get("rangeDate")?.get("end")?.setValue(p?.end),this.dropdownOptions={adults:s?.adults,child:s?.child,infant:s?.infant}}}),localStorage.getItem("cart-items")||localStorage.setItem("cart-items",JSON.stringify([]))}selectFlightType(e){this.flightType=e.value,"1"===e.value?(this.form.controls.date.disable(),this.form.controls.rangeDate.enable()):(this.form.controls.rangeDate.disable(),this.form.controls.date.enable())}dropdownValueChanged(e){this.dropdownOptions=e;let a="adults";for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&this.form.controls.passengers.controls[a].setValue(e[a])}submitSearch(){if(this.form.valid){const{from:e,destination:a,passengers:r,date:c,rangeDate:m}=this.form.value,s={from:e.id,destination:a.id,date:void 0,rangeDate:void 0,count:r?.adults+r?.child+r?.infant};m?s.rangeDate=m:s.date=c,localStorage.setItem("search_result",JSON.stringify(this.form.value)),this.store.dispatch((0,M.uP)({searchResult:this.form.value})),this.httpService.getTicket(s).subscribe(p=>{localStorage.removeItem("ticket"),localStorage.removeItem("passengers_info"),localStorage.setItem("ticket_result",JSON.stringify(p)),this.route.navigate(["/booking"])})}}flipFlight(){const a=this.form.controls.from.value;this.form.controls.from.setValue(this.form.controls.destination.value),this.form.controls.destination.setValue(a)}openDateBlock(e){e.open()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(b.F0),t.Y36(P.yh),t.Y36(C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:3,vars:2,consts:[["class","main-block",4,"ngIf","ngIfElse"],["loading",""],[1,"main-block"],[1,"order-block"],[1,"order-card",3,"formGroup"],[1,"flight-type"],["aria-label","Select an option"],["color","primary","value","1","checked","",3,"change"],["color","primary","value","2",3,"change"],[1,"choose-line"],["mat-mini-fab","",1,"swap-btn",3,"click"],["appearance","outline"],["formControlName","from"],[3,"value",4,"ngFor","ngForOf"],["formControlName","destination"],[1,"date-pass"],["appearance","outline",4,"ngIf"],[3,"title","options","currentValueChange"],[1,"main-btn-block"],["type","button","mat-flat-button","","color","primary",1,"search-btn","primary",3,"disabled","click"],[1,"body-bottom"],[3,"value"],[1,"subtitle"],["formGroupName","rangeDate",3,"min","rangePicker","click"],["matStartDate","","formControlName","start","placeholder","Start date",3,"readonly"],["matEndDate","","formControlName","end","placeholder","End date",3,"readonly"],["matIconSuffix","",3,"for"],["disabled","false"],["multiPicker",""],["matInput","","formControlName","date",3,"readonly","min","matDatepicker","click"],["picker",""],[1,"main-block","loading"]],template:function(e,a){if(1&e&&(t.YNc(0,D,35,10,"main",0),t.YNc(1,S,2,0,"ng-template",null,1,t.W1O)),2&e){const r=t.MAs(2);t.Q6J("ngIf",a.cities.length)("ngIfElse",r)}},dependencies:[g.sg,g.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,o.x0,k.Hw,u.KE,u.hX,u.R9,w.Nt,v.lW,v.nh,y.gD,y.$L,T.ey,h.VQ,h.U0,Z.L,d.Mq,d.hl,d.nW,d.wx,d.zY,d.By,d._g,I.Ou],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.main-block[_ngcontent-%COMP%]{position:relative;width:100%;height:100vh;display:grid;grid-template-columns:repeat(7,1fr);grid-template-rows:repeat(10,1fr);background:url(bg-airplane.8da21461b07a1811.jpg),rgba(0,0,0,.25);background-position:center;background-repeat:no-repeat;background-size:cover}.order-block[_ngcontent-%COMP%]{grid-column-start:2;grid-column-end:3;grid-row-start:4;grid-row-end:9}.body-bottom[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:8;grid-row-start:10;grid-row-end:11;background:#f5f5f5}.order-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.85);border-radius:8px;padding:24px;position:relative}.order-card[_ngcontent-%COMP%]   .flight-type[_ngcontent-%COMP%]{margin-bottom:12px}.order-card[_ngcontent-%COMP%]   .flight-type[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]{display:flex;gap:32px}.order-card[_ngcontent-%COMP%]   .choose-line[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}.order-card[_ngcontent-%COMP%]   .choose-line[_ngcontent-%COMP%]   .swap-btn[_ngcontent-%COMP%]{position:absolute;z-index:1;right:20px;top:45px;background-color:#fff;color:#74767a}.order-card[_ngcontent-%COMP%]   .date-pass[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.order-card[_ngcontent-%COMP%]   .date-pass[_ngcontent-%COMP%]   .date-pick-block[_ngcontent-%COMP%]{width:100%}.order-card[_ngcontent-%COMP%]   .date-pass[_ngcontent-%COMP%]   .date-pick-block[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:98%}.order-card[_ngcontent-%COMP%]   .passengers[_ngcontent-%COMP%]{width:201px;background:#f4f6f9;border-radius:4px;border:1px solid #a7a9ad;cursor:pointer;height:56px;padding:8px 0 0 16px}.order-card[_ngcontent-%COMP%]   .passengers[_ngcontent-%COMP%]   .passenger-label[_ngcontent-%COMP%]{font-size:12px;line-height:16px;letter-spacing:.4px;color:#49454f}.order-card[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{width:201px;background:#ffffff;box-shadow:0 1px 4px #0003;position:absolute;top:276px;right:23px;z-index:2;padding:14px 16px}.order-card[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.order-card[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   .option-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:24px;letter-spacing:.5px;color:#11397e}.order-card[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   .option-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;line-height:20px;letter-spacing:.25px;color:#74767a}.mat-mdc-radio-button.mat-accent[_ngcontent-%COMP%]{font-weight:500;font-size:16px}  .label-block .dropdown-label{font-size:12px!important;line-height:16px!important;letter-spacing:.4px!important;color:#49454f!important}  .mat-mdc-text-field-wrapper{border:none}  .mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:20px;padding-right:0}  .mat-mdc-form-field.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label,   .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{top:20px!important}  .mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:8px}  .mat-label{font-size:12px;line-height:16px;letter-spacing:.4px;color:#49454f}  .dropdown-value{font-weight:400!important;color:#1c1b1f!important}  .mdc-notched-outline__leading,   .mdc-notched-outline__notch,   .mdc-notched-outline__trailing{border:none}  .mat-mdc-form-field-infix{display:flex;flex-direction:column;justify-content:center;padding-bottom:8px!important;font-size:16px;line-height:24px;letter-spacing:.5px;color:#1c1b1f}  .search-btn.mdc-button{padding:12px 24px;background:#11397e;border-radius:4px;box-sizing:content-box;margin-left:auto}  .search-btn.mdc-button:disabled{background-color:#a7a9ad}.main-btn-block[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]}),n})();var U=i(898),V=i(262),z=i(2843);const Q={provide:f.TP,useClass:(()=>{class n{constructor(){}intercept(e,a){return a.handle(e).pipe((0,V.K)(c=>(0,z._)(c)))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})(),multi:!0};let q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[C,Q,{provide:h._J,useValue:{color:"accent"}}],imports:[g.ez,f.JF,b.Bz.forChild([{path:"",component:F}]),o.UX,U.q]}),n})()}}]);